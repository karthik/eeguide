<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<style type="text/css">
.knitr.inline {
  background-color: #f7f7f7;
  border:solid 1px #B0B0B0;
}
.error {
	font-weight: bold;
	color: #FF0000;
},
.warning {
	font-weight: bold;
}
.message {
	font-style: italic;
}
.source, .output, .warning, .error, .message {
	padding: 0em 1em;
  border:solid 1px #F7F7F7;
}
.source {
  background-color: #f5f5f5;
}
.rimage.left {
  text-align: left;
}
.rimage.right {
  text-align: right;
}
.rimage.center {
  text-align: center;
}
.hl.num {
  color: #AF0F91;
}
.hl.str {
  color: #317ECC;
}
.hl.com {
  color: #AD95AF;
  font-style: italic;
}
.hl.opt {
  color: #000000;
}
.hl.std {
  color: #585858;
}
.hl.kwa {
  color: #295F94;
  font-weight: bold;
}
.hl.kwb {
  color: #B05A65;
}
.hl.kwc {
  color: #55aa55;
}
.hl.kwd {
  color: #BC5A65;
  font-weight: bold;
}
</style>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Guide to using the ecoengine R package</title>
	<meta name="description" content="Guide to using the ecoengine R package">
	<meta name="author" content="Karthik Ram">
	<meta name="viewport" content="width=1024, user-scalable=no">
	<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
	<!-- Core and extension CSS files -->
	<script src="//use.edgefonts.net/anonymous-pro.js"></script> 
    <script src="http://use.edgefonts.net/quattrocento-sans.js"></script>
    <script src="http://use.edgefonts.net/gentium-book-basic.js"></script>
    <script src="//use.edgefonts.net/kotta-one.js"></script>
	<link rel="stylesheet" href="core/deck.core.css">
	<link rel="stylesheet" href="extensions/goto/deck.goto.css">
	<link rel="stylesheet" href="extensions/menu/deck.menu.css">
	<link rel="stylesheet" href="extensions/navigation/deck.navigation.css">
	<link rel="stylesheet" href="extensions/status/deck.status.css">
	<link rel="stylesheet" href="extensions/hash/deck.hash.css">
	<link rel="stylesheet" href="extensions/automatic/deck.automatic.css">
	<link rel="stylesheet" href="themes/style/barug.css">
	<link rel="stylesheet" href="themes/transition/fade.css">
	<link rel="stylesheet" href="themes/style/knitr.css">
	<script src="js/modernizr.custom.js"></script>

</head>




 <body class="deck-container">

<!--    ##############    slide delimiter  ##############    -->

<section class="slide" id="ropensci">
	<div>
	<br><br><br>
	<hgroup>
	<img src="images/ropensci.png">
	<center><h3><span style="color:#34495E; font-size:70px">A guide to using the Ecoengine package</span><i class="ss-globe"></i></h3><br><br>
	<h4> <a href="https://twitter.com/_inundata">@_inundata</a> &nbsp;<br>
	karthik.github.io/eeguide	
	</h4>
	</center>
	</hgroup>
	</div>
</section>


<!--    ##############    slide delimiter  ##############    -->


<section class="slide" id="installing_package">
<br><br>
<h2>Installing the package</h2>
<div class="chunk" id="installing"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">install.packages</span><span class="hl std">(</span><span class="hl str">&quot;ecoengine&quot;</span><span class="hl std">)</span>
<span class="hl com"># Requires R version 3.0.1 or higher</span>
</pre></div>
</div></div>

</section>


<section class="slide" id="ecoengine_api">
<br><br>
<h2>The ecoengine API</h2>
<div class="chunk" id="basic"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">library</span><span class="hl std">(ecoengine)</span>
<span class="hl kwd">ee_about</span><span class="hl std">()</span>
</pre></div>
<div class="output"><pre class="knitr r">##        type                                        endpoint
## 1 meta-data      http://ecoengine.berkeley.edu/api/sources/
## 2 meta-data   http://ecoengine.berkeley.edu/api/footprints/
## 3      data   http://ecoengine.berkeley.edu/api/checklists/
## 4      data      http://ecoengine.berkeley.edu/api/sensors/
## 5      data       http://ecoengine.berkeley.edu/api/vtmveg/
## 6      data http://ecoengine.berkeley.edu/api/observations/
## 7      data       http://ecoengine.berkeley.edu/api/photos/
## 8   actions       http://ecoengine.berkeley.edu/api/search/
</pre></div>
</div></div>

   <a href="http://ecoengine.berkeley.edu/">More on the documentation</a>
</section>


<section class="slide" id="ecoengine_sources">
<br><br>
<h2>Data sources in the API</h2>
<div class="chunk" id="ee_sources"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">source_list</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_sources</span><span class="hl std">()</span>
<span class="hl kwd">unique</span><span class="hl std">(source_list</span><span class="hl opt">$</span><span class="hl std">name)</span>
</pre></div>
<div class="output"><pre class="knitr r">##  [1] "LACM Vertebrate Collection"       
##  [2] "MVZ Birds"                        
##  [3] "MVZ Herp Collection"              
##  [4] "MVZ Mammals"                      
##  [5] "Wieslander Vegetation Map"        
##  [6] "CAS Herpetology"                  
##  [7] "Consortium of California Herbaria"
##  [8] "UCMP Vertebrate Collection"       
##  [9] "Sensor Data Qualifiers"           
## [10] "Essig Museum of Entymology"
</pre></div>
</div></div>

</section>


<section class="slide" id="about_ee">
<br><br>
<h2>Retrieving observation data</h2>
<div class="chunk" id="ee_obs1"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">results</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_observations</span><span class="hl std">(</span><span class="hl kwc">genus</span> <span class="hl std">=</span> <span class="hl str">&quot;Lynx&quot;</span><span class="hl std">,</span> <span class="hl kwc">progress</span> <span class="hl std">=</span> <span class="hl num">FALSE</span><span class="hl std">)</span>
<span class="hl std">results</span>
</pre></div>
<div class="output"><pre class="knitr r">## [Total results]: 795 
## [Args]: 
## country = United States 
## genus = Lynx 
## georeferenced = FALSE 
## page_size = 25 
## page = 1 
## [Type]: observations 
## [Number of results]: 25
</pre></div>
</div></div>

</section>



<section class="slide" id="ee_obs">
<br><br>
<h2>Retrieving multiple pages of data</h2>
<div class="chunk" id="ee_obs"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">results</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_observations</span><span class="hl std">(</span><span class="hl kwc">genus</span> <span class="hl std">=</span> <span class="hl str">&quot;Lynx&quot;</span><span class="hl std">,</span> <span class="hl kwc">page</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl opt">:</span><span class="hl num">2</span><span class="hl std">,</span> <span class="hl kwc">progress</span> <span class="hl std">=</span> <span class="hl num">FALSE</span><span class="hl std">)</span>
<span class="hl std">results</span>
</pre></div>
<div class="output"><pre class="knitr r">## [Total results]: 795 
## [Args]: 
## country = United States 
## genus = Lynx 
## georeferenced = FALSE 
## page_size = 25 
## page = 1 2 
## [Type]: observations 
## [Number of results]: 50
</pre></div>
</div></div>

</section>



<section class="slide" id="pinus_example">
<br><br>
<h2>Retrieving data for a particular species</h2>
<div class="chunk" id="pinus"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">pinus_observations</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_observations</span><span class="hl std">(</span><span class="hl kwc">scientific_name</span> <span class="hl std">=</span> <span class="hl str">&quot;Pinus&quot;</span><span class="hl std">,</span> <span class="hl kwc">page</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">,</span> <span class="hl kwc">quiet</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">,</span>
    <span class="hl kwc">progress</span> <span class="hl std">=</span> <span class="hl num">FALSE</span><span class="hl std">)</span>
<span class="hl std">pinus_observations</span>
</pre></div>
<div class="output"><pre class="knitr r">## [Total results]: 48333 
## [Args]: 
## country = United States 
## scientific_name = Pinus 
## georeferenced = FALSE 
## page_size = 25 
## page = 1 
## [Type]: observations 
## [Number of results]: 25
</pre></div>
</div></div>

</section>



<section class="slide" id="more_examples">
<h2>More examples of searches</h2>	
<br><br>
<div class="chunk" id="more_examples"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">animalia</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_observations</span><span class="hl std">(</span><span class="hl kwc">kingdom</span> <span class="hl std">=</span> <span class="hl str">&quot;Animalia&quot;</span><span class="hl std">)</span>
<span class="hl std">Artemisia</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_observations</span><span class="hl std">(</span><span class="hl kwc">scientific_name</span> <span class="hl std">=</span> <span class="hl str">&quot;Artemisia douglasiana&quot;</span><span class="hl std">)</span>
<span class="hl std">asteraceae</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_observationss</span><span class="hl std">(</span><span class="hl kwc">family</span> <span class="hl std">=</span> <span class="hl str">&quot;asteraceae&quot;</span><span class="hl std">)</span>
<span class="hl std">vulpes</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_observations</span><span class="hl std">(</span><span class="hl kwc">genus</span> <span class="hl std">=</span> <span class="hl str">&quot;vulpes&quot;</span><span class="hl std">)</span>
<span class="hl std">Anas</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_observations</span><span class="hl std">(</span><span class="hl kwc">scientific_name</span> <span class="hl std">=</span> <span class="hl str">&quot;Anas cyanoptera&quot;</span><span class="hl std">,</span> <span class="hl kwc">page</span> <span class="hl std">=</span> <span class="hl str">&quot;all&quot;</span><span class="hl std">)</span>
<span class="hl std">loons</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_observations</span><span class="hl std">(</span><span class="hl kwc">scientific_name</span> <span class="hl std">=</span> <span class="hl str">&quot;Gavia immer&quot;</span><span class="hl std">,</span> <span class="hl kwc">page</span> <span class="hl std">=</span> <span class="hl str">&quot;all&quot;</span><span class="hl std">)</span>
<span class="hl std">plantae</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_observations</span><span class="hl std">(</span><span class="hl kwc">kingdom</span> <span class="hl std">=</span> <span class="hl str">&quot;plantae&quot;</span><span class="hl std">)</span>
<span class="hl com"># grab first 10 pages (250 results)</span>
<span class="hl std">plantae</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_observations</span><span class="hl std">(</span><span class="hl kwc">kingdom</span> <span class="hl std">=</span> <span class="hl str">&quot;plantae&quot;</span><span class="hl std">,</span> <span class="hl kwc">page</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl opt">:</span><span class="hl num">10</span><span class="hl std">)</span>
<span class="hl std">chordata</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_observations</span><span class="hl std">(</span><span class="hl kwc">phylum</span> <span class="hl std">=</span> <span class="hl str">&quot;chordata&quot;</span><span class="hl std">)</span>
<span class="hl com"># Class is clss since the former is a reserved keyword in SQL.</span>
<span class="hl std">aves</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_observations</span><span class="hl std">(</span><span class="hl kwc">clss</span> <span class="hl std">=</span> <span class="hl str">&quot;aves&quot;</span><span class="hl std">)</span>
</pre></div>
</div></div>

</section>



<section class="slide" id="ee_interactive_maps">
<h2>Generate interactive maps with ecoengine</h2>	
<br><br>
<div class="chunk" id="map"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">lynx_data</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_observations</span><span class="hl std">(</span><span class="hl kwc">genus</span> <span class="hl std">=</span> <span class="hl str">&quot;Lynx&quot;</span><span class="hl std">,</span> <span class="hl kwc">georeferenced</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">,</span> <span class="hl kwc">page</span> <span class="hl std">=</span> <span class="hl str">&quot;all&quot;</span><span class="hl std">,</span>
    <span class="hl kwc">quiet</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">)</span>
<span class="hl kwd">ee_map</span><span class="hl std">(lynx_data)</span>
</pre></div>
</div></div>

<a href="Ecoengine_species_map/Ecoengine_species_map.html"><img src="images/map.png"></a>
</section>



<section class="slide" id="sensors">
<h2>Sensor data</h2>	
<br><br>
<div class="chunk" id="sensor_data"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">head</span><span class="hl std">(</span><span class="hl kwd">ee_list_sensors</span><span class="hl std">())</span>
</pre></div>
<div class="output"><pre class="knitr r">##            station_name                       units
## 1          Angelo HQ WS Kilojoules per square meter
## 2      Angelo Meadow WS      Watts per square meter
## 3 Angelo HQ SF Eel Gage                     Percent
## 4          Angelo HQ WS                      Degree
## 5         Cahto Peak WS           Meters per second
## 6      Angelo Meadow WS           Meters per second
##                       variable                       method_name record
## 1 Solar radiation total kj/m^2 Conversion to 30-minute timesteps   1625
## 2  Solar radiation total w/m^2 Conversion to 30-minute timesteps   1632
## 3            Rel humidity perc Conversion to 30-minute timesteps   1641
## 4       Wind direction degrees Conversion to 30-minute timesteps   1644
## 5            Wind speed avg ms Conversion to 30-minute timesteps   1651
## 6            Wind speed max ms Conversion to 30-minute timesteps   1654
</pre></div>
</div></div>


</section>


<section class="slide" id="sensors_data">
<h2>Sensor data</h2>	
<br><br>
<div class="chunk" id="sensor_data2"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com"># First we can grab the list of sensor ids</span>
<span class="hl std">sensor_ids</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_list_sensors</span><span class="hl std">()</span><span class="hl opt">$</span><span class="hl std">record</span>
<span class="hl com"># In this case we just need data for sensor with id 1625</span>
<span class="hl std">angelo_hq</span> <span class="hl kwb">&lt;-</span> <span class="hl std">sensor_ids[</span><span class="hl num">1</span><span class="hl std">]</span>
<span class="hl std">results</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_sensor_data</span><span class="hl std">(angelo_hq,</span> <span class="hl kwc">page</span> <span class="hl std">=</span> <span class="hl num">2</span><span class="hl std">,</span> <span class="hl kwc">progress</span> <span class="hl std">=</span> <span class="hl num">FALSE</span><span class="hl std">)</span>
<span class="hl std">results</span>
</pre></div>
<div class="output"><pre class="knitr r">## [Total results]: 56779 
## [Args]: 
## page_size = 25 
## page = 2 
## [Type]: sensor 
## [Number of results]: 25
</pre></div>
</div></div>


</section>
<section class="slide" id="agg_sensor_data">
<h2>Aggregated Sensor data</h2>	
<br><br>
<div class="chunk" id="agg_sensor_data"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">stations</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_list_sensors</span><span class="hl std">()</span>
<span class="hl std">sensor_df</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_sensor_agg</span><span class="hl std">(</span><span class="hl kwc">sensor_id</span> <span class="hl std">= stations[</span><span class="hl num">1</span><span class="hl std">,</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;record&quot;</span><span class="hl std">)],</span> <span class="hl kwc">weeks</span> <span class="hl std">=</span> <span class="hl num">2</span><span class="hl std">,</span>
    <span class="hl kwc">progress</span> <span class="hl std">=</span> <span class="hl num">FALSE</span><span class="hl std">)</span>
<span class="hl kwd">head</span><span class="hl std">(sensor_df</span><span class="hl opt">$</span><span class="hl std">data)</span>
</pre></div>
<div class="output"><pre class="knitr r">##    begin_date  mean min   max   sum count
## 2  2010-01-17 18.94   0 150.8  7613   402
## 26 2010-01-31 17.03   0 237.7 11444   672
## 3  2010-02-14 29.54   0 336.3 19852   672
## 4  2010-02-28 42.08   0 402.5 28276   672
## 5  2010-03-14 59.12   0 466.6 39730   672
## 6  2010-03-28 93.55   0 490.6 62678   670
</pre></div>
</div></div>



<img src= "images/plt.png">

</section>


<section class="slide" id="downloading_data">
<h2>Downloading large amounts of data</h2>	
<br><br>
<div class="chunk" id="large_data"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">rodent_pages</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_pages</span><span class="hl std">(</span><span class="hl kwd">ee_observations</span><span class="hl std">(</span><span class="hl kwc">order</span> <span class="hl std">=</span> <span class="hl str">&quot;Rodentia&quot;</span><span class="hl std">,</span> <span class="hl kwc">progress</span> <span class="hl std">=</span> <span class="hl num">FALSE</span><span class="hl std">,</span>
    <span class="hl kwc">quiet</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">))</span>
<span class="hl std">page_breaks</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">split</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl opt">:</span><span class="hl std">rodent_pages,</span> <span class="hl kwd">ceiling</span><span class="hl std">(</span><span class="hl kwd">seq_along</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl opt">:</span><span class="hl std">rodent_pages)</span><span class="hl opt">/</span><span class="hl num">1000</span><span class="hl std">))</span>
<span class="hl std">rodent_data</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">list</span><span class="hl std">()</span>
<span class="hl com"># This step will take a while, as it downloads ~50 mb of data with pauses to</span>
<span class="hl com"># avoid hammering API</span>
<span class="hl kwa">for</span> <span class="hl std">(i</span> <span class="hl kwa">in</span> <span class="hl num">1</span><span class="hl opt">:</span><span class="hl kwd">length</span><span class="hl std">(rodent_data)) {</span>
    <span class="hl std">rodent_data</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_observations</span><span class="hl std">(</span><span class="hl kwc">order</span> <span class="hl std">=</span> <span class="hl str">&quot;Rodentia&quot;</span><span class="hl std">,</span> <span class="hl kwc">page</span> <span class="hl std">= page_breaks[[</span><span class="hl num">1</span><span class="hl std">]])</span>
    <span class="hl kwd">write.csv</span><span class="hl std">(rodent_data</span><span class="hl opt">$</span><span class="hl std">data,</span> <span class="hl kwc">file</span> <span class="hl std">=</span> <span class="hl kwd">paste0</span><span class="hl std">(</span><span class="hl str">&quot;rodent_data&quot;</span><span class="hl std">, i,</span> <span class="hl str">&quot;.csv&quot;</span><span class="hl std">))</span>
<span class="hl std">}</span>
</pre></div>
</div></div>

<a href="https://gist.github.com/karthik/9197100">See full working example</a>
</section>


<section class="slide" id="downloading_data_alt">
<h2>Downloading a large amount of data (a more elegant way)</h2>	
<br><br>
<div class="chunk" id="large_data2"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">library</span><span class="hl std">(plyr)</span>
<span class="hl std">rodent_pages</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_pages</span><span class="hl std">(</span><span class="hl kwd">ee_observations</span><span class="hl std">(</span><span class="hl kwc">order</span> <span class="hl std">=</span> <span class="hl str">&quot;Rodentia&quot;</span><span class="hl std">,</span> <span class="hl kwc">progress</span> <span class="hl std">=</span> <span class="hl num">FALSE</span><span class="hl std">,</span>
    <span class="hl kwc">quiet</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">))</span>
<span class="hl std">page_breaks</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">split</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl opt">:</span><span class="hl std">rodent_pages,</span> <span class="hl kwd">ceiling</span><span class="hl std">(</span><span class="hl kwd">seq_along</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl opt">:</span><span class="hl std">rodent_pages)</span><span class="hl opt">/</span><span class="hl num">1000</span><span class="hl std">))</span>
<span class="hl std">results</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ldply</span><span class="hl std">(page_breaks,</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">) {</span>
    <span class="hl std">results</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_pages</span><span class="hl std">(</span><span class="hl kwd">ee_observations</span><span class="hl std">(</span><span class="hl kwc">order</span> <span class="hl std">=</span> <span class="hl str">&quot;Rodentia&quot;</span><span class="hl std">,</span> <span class="hl kwc">page</span> <span class="hl std">= x,</span> <span class="hl kwc">quiet</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">))</span>
    <span class="hl std">results</span><span class="hl opt">$</span><span class="hl std">data</span>
<span class="hl std">},</span> <span class="hl kwc">.progress</span> <span class="hl std">=</span> <span class="hl str">&quot;text&quot;</span><span class="hl std">)</span>
</pre></div>
</div></div>

</section>




<section class="slide" id="summarizing_data">
<h2>Summarizing the results</h2>	
<br><br>
<div class="chunk" id="summaries"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">library</span><span class="hl std">(dplyr)</span>
<span class="hl std">rodents_summary</span> <span class="hl kwb">&lt;-</span> <span class="hl std">rodents[</span><span class="hl opt">!</span><span class="hl kwd">is.na</span><span class="hl std">(rodents</span><span class="hl opt">$</span><span class="hl std">year), ]</span> <span class="hl opt">%.%</span> <span class="hl kwd">regroup</span><span class="hl std">(</span><span class="hl kwd">list</span><span class="hl std">(</span><span class="hl kwd">quote</span><span class="hl std">(abbreviation),</span>
    <span class="hl kwd">quote</span><span class="hl std">(year)))</span> <span class="hl opt">%.%</span> <span class="hl kwd">summarise</span><span class="hl std">(</span><span class="hl kwc">n</span> <span class="hl std">=</span> <span class="hl kwd">n</span><span class="hl std">())</span>
<span class="hl kwd">names</span><span class="hl std">(rodents_summary)</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;State&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Year&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Counts&quot;</span><span class="hl std">)</span>
<span class="hl kwd">head</span><span class="hl std">(rodents_summary)</span>
</pre></div>
</div></div>

<div class="chunk" id="show_some_results"><div class="rcode"><div class="output"><pre class="knitr r">##     X State Year Counts
## 1 178    CA 1818      9
## 2  89    OR 1899     16
## 3 166    CA 1904    178
## 4  93    OR 1905     32
## 5 168    CA 1905     18
## 6  97    CA 1907     32
</pre></div>
</div></div>

</section>




<section class="slide" id="chloropleths">
<h2>Chloropleths</h2>	
<div class="chunk" id="other"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">library</span><span class="hl std">(rMaps)</span>
<span class="hl std">rodents_summary</span> <span class="hl kwb">&lt;-</span> <span class="hl std">dplyr::</span><span class="hl kwd">filter</span><span class="hl std">(rodents_summary, Year</span> <span class="hl opt">&gt;</span> <span class="hl num">1899</span><span class="hl std">)</span>
<span class="hl kwd">ichoropleth</span><span class="hl std">(Counts</span> <span class="hl opt">~</span> <span class="hl std">State,</span> <span class="hl kwc">data</span> <span class="hl std">= rodents_summary,</span> <span class="hl kwc">animate</span> <span class="hl std">=</span> <span class="hl str">&quot;Year&quot;</span><span class="hl std">,</span> <span class="hl kwc">pal</span> <span class="hl std">=</span> <span class="hl str">&quot;Reds&quot;</span><span class="hl std">,</span>
    <span class="hl kwc">ncuts</span> <span class="hl std">=</span> <span class="hl num">4</span><span class="hl std">,</span> <span class="hl kwc">play</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">)</span>
</pre></div>
</div></div>

<a href="chloropleth_example.html"><img src = "images/chloropleth.png" target="_blank"></a>
</section>



<section class="slide" id="checklists">
<h2>Checklist Data</h2>	
<br><br>
<div class="chunk" id="last"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">all_lists</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_checklists</span><span class="hl std">()</span>
<span class="hl kwd">nrow</span><span class="hl std">(all_lists)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 57
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">unique</span><span class="hl std">(all_lists</span><span class="hl opt">$</span><span class="hl std">subject)</span>
</pre></div>
<div class="output"><pre class="knitr r">##  [1] "Mammals"                  "Mosses"                  
##  [3] "Beetles"                  "Spiders"                 
##  [5] "Amphibians"               "Ants"                    
##  [7] "Fungi"                    "Lichen"                  
##  [9] "Plants"                   "Reptiles"                
## [11] "Algae"                    "Arthropods"              
## [13] "Liverworts"               "Birds"                   
## [15] "Butterflies & Moths"      "Fish"                    
## [17] "Bees"                     "Archaeognatha"           
## [19] "Insects 1937-1955"        "Orthoptera and Cicadidae"
## [21] "Butterflies"              "Aquatic Insects"         
## [23] "Stoneflies"               "Caddisflies"             
## [25] "whipworms"                "Tardigrades"             
## [27] "Small Mammals"            "False Scorpions"         
## [29] "Crane-flies"              "Chiggers"                
## [31] "Cestodes"                 "Rodents"                 
## [33] "Lichens"                  "Grasses and Forbes"      
## [35] "Macroinvertebrates"       "Amphibians and Reptiles"
</pre></div>
</div></div>

</section>


<section class="slide" id="checklists_spiders">
<h2>Looking through one subject in the checklist</h2>	
<br><br>
<div class="chunk" id="spiders"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">spiders</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_checklists</span><span class="hl std">(</span><span class="hl kwc">subject</span> <span class="hl std">=</span> <span class="hl str">&quot;Spiders&quot;</span><span class="hl std">)</span>
<span class="hl std">spiders</span>
</pre></div>
<div class="output"><pre class="knitr r">##                  record
## 4  bigcb:specieslist:15
## 10 bigcb:specieslist:20
##                                                         footprint
## 4  http://ecoengine.berkeley.edu/api/footprints/hastings-reserve/
## 10   http://ecoengine.berkeley.edu/api/footprints/angelo-reserve/
##                                                                       url
## 4  http://ecoengine.berkeley.edu/api/checklists/bigcb%3Aspecieslist%3A15/
## 10 http://ecoengine.berkeley.edu/api/checklists/bigcb%3Aspecieslist%3A20/
##                                           source subject
## 4  http://ecoengine.berkeley.edu/api/sources/18/ Spiders
## 10 http://ecoengine.berkeley.edu/api/sources/18/ Spiders
</pre></div>
</div></div>

</section>



<section class="slide" id="checklists_spiders_download">
<h2>Downloading complete checklist data</h2>	
<br><br>
<div class="chunk" id="spider_download"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">library</span><span class="hl std">(plyr)</span>
<span class="hl std">spider_details</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ldply</span><span class="hl std">(spiders</span><span class="hl opt">$</span><span class="hl std">url, checklist_details)</span>
<span class="hl kwd">names</span><span class="hl std">(spider_details)</span>
</pre></div>
<div class="output"><pre class="knitr r">##  [1] "url"                              "observation_type"                
##  [3] "scientific_name"                  "collection_code"                 
##  [5] "institution_code"                 "country"                         
##  [7] "state_province"                   "county"                          
##  [9] "locality"                         "coordinate_uncertainty_in_meters"
## [11] "begin_date"                       "end_date"                        
## [13] "kingdom"                          "phylum"                          
## [15] "clss"                             "order"                           
## [17] "family"                           "genus"                           
## [19] "specific_epithet"                 "infraspecific_epithet"           
## [21] "source"                           "remote_resource"                 
## [23] "earliest_period_or_lowest_system" "latest_period_or_highest_system"
</pre></div>
</div></div>

</section>




<section class="slide" id="photos">
<h2>Search photos</h2>
The engine has the full database of Cal photos.	
<br><br>
<div class="chunk" id="photos"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">photos</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_photos</span><span class="hl std">(</span><span class="hl kwc">quiet</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">,</span> <span class="hl kwc">progress</span> <span class="hl std">=</span> <span class="hl num">FALSE</span><span class="hl std">)</span>
<span class="hl std">photos</span>
</pre></div>
<div class="output"><pre class="knitr r">## [Total results]: 43708 
## [Args]: 
## page_size = 25 
## georeferenced = 0 
## page = 1 
## [Type]: photos 
## [Number of results]: 25
</pre></div>
</div></div>

</section>



<section class="slide" id="photos_example">
<h2>Browse photos</h2><br>	
Quickly browse any photo search query with <code>view_photos()</code>
<br>
<div class="chunk" id="photo_viewer"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">poppys</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ee_photos</span><span class="hl std">(</span><span class="hl kwc">scientific_name</span> <span class="hl std">=</span> <span class="hl str">&quot;Eschscholzia californica&quot;</span><span class="hl std">,</span> <span class="hl kwc">quiet</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">,</span>
    <span class="hl kwc">progress</span> <span class="hl std">=</span> <span class="hl num">FALSE</span><span class="hl std">)</span>
<span class="hl kwd">view_photos</span><span class="hl std">(poppys)</span>
</pre></div>
</div></div>

<img src = "images/ecoengine_viewer.png">
</section>


<section class="slide" id="more_info">
	<div>
		<h2>Grab a PDF guide to the package</h2><br>
		The vignette walks you through all of the functions available from the package and has a full set of examples.
<a href="https://github.com/ropensci/ecoengine/blob/master/inst/Using_ecoengine.pdf?raw=true"><img src="images/pdf_ecoengine.png"></a>
</div>
</section>


<!--    ##############    closing slide  ##############    -->
<section class="slide" id="outro">
	<div>
	<hgroup>
	<h1>ropensci.org/ecoengine.html</h1>
	<h2><a href="http://GitHub.com/ropensci"  style="color:#010101;"> ropensci on GitHub</a><br>
	<a href="http://twitter.com/ropensci"  style="color:#79cef7;"> @ropensci on Twitter </a><br>
	Questions or comments to: karthik dot ram at berkeley dot edu
	<h2>To navigate this presentation, type <span style="color:#e64b65;font-style:bold; text-shadow: none"><b>M</a></span> to see all slides. <br><b><span style="color:#e64b65;font-style:bold; text-shadow: none"><b>G</a></span> to go to a specific slide</h2>

</hgroup>
</div>
</section>

<!-- ============================================================================= -->
<!-- ====      END PRESENTATION  ==== -->
<!-- Everything below can be ignored (just js libraries) -->
<!-- ============================================================================= -->






































<!-- deck.navigation snippet -->
<a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
<a href="#" class="deck-next-link" title="Next">&#8594;</a>

<!-- deck.status snippet -->
<p class="deck-status">
	<span class="deck-status-current"></span>
	/
	<span class="deck-status-total"></span>
</p>

<!-- deck.goto snippet -->
<form action="." method="get" class="goto-form">
	<label for="goto-slide">Go to slide:</label>
	<input type="text" name="slidenum" id="goto-slide" list="goto-datalist">
	<datalist id="goto-datalist"></datalist>
	<input type="submit" value="Go">
</form>

<!-- deck.hash snippet -->
<a href="." title="Permalink to this slide" class="deck-permalink">#</a>


<!-- Grab CDN jQuery, with a protocol relative URL; fall back to local if offline -->
<script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
<script>window.jQuery || document.write('<script src="jquery-1.7.min.js"><\/script>')</script>

<!-- Deck Core and extensions -->
<script src="core/deck.core.js"></script>
<script src="extensions/hash/deck.hash.js"></script>
<script src="extensions/menu/deck.menu.js"></script>
<script src="extensions/goto/deck.goto.js"></script>
<script src="extensions/status/deck.status.js"></script>
<script src="extensions/navigation/deck.navigation.js"></script>
<script src="extensions/blank/deck.blank.js"></script>

<!-- Initialize the deck -->
  <script>
    $(function() {
      $.extend(true, $.deck.defaults, {
         automatic: {
     			startRunning: true,
     			cycle: false,
     			slideDuration: 15000
     		},
     		classdata: {
		      'bullet-point-timing': {
		        duration: 100
		      }
		    }
      });
      $.deck('.slide');
    })
  </script>
     <!-- Gauges Analytics -->
<script type="text/javascript">
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '500ebcf4613f5d79c700001c');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>

</body>
</html>
